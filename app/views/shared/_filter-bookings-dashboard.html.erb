<div class="earnings mt-5">
  <h3 class="mt-4 mb-3 font-weight-bold">Filter</h3>

  <ul class="nav nav-pills nav-fill" id="pills-tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="pills-week-tab" data-toggle="pill" href="#pills-week" role="tab" aria-controls="pills-home" aria-selected="true">WEEK</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-month-tab" data-toggle="pill" href="#pills-month" role="tab" aria-controls="pills-profile" aria-selected="false">MONTH</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-year-tab" data-toggle="pill" href="#pills-year" role="tab" aria-controls="pills-contact" aria-selected="false">YEAR</a>
    </li>
  </ul>
  <div class="tab-content" id="pills-tabContent">

    <!-- Property bookings by current WEEK -->
    <div class="tab-pane fade show active" id="pills-week" role="tabpanel" aria-labelledby="pills-week-tab">

      <div class="d-flex">
        <div class="flex-grow-1">
          <h5 class="text-grey"># bookings</h5>
          <span class="font-weight-bold"><%= current_user.current_week_pm_bookings.size %></span>
        </div>
      </div>

      <% @current_week_pm_bookings.each do |booking| %>
        <div class="card card-dashboard">
          <div class="card-body">
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-calendar fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%d/%m/%Y") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-clock fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%H:%M") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-map-marker-alt fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.property.address %></h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-euro-sign fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.cost.round %> </h3>
            </div>
            <h4 class="mt-3 mb-1">Service details:</h4>
            <% booking.booking_tasks.each do |t| %>
              <h4 class="mb-1"> <i class="fas fa-check fa-fw grey"></i> <%= t.task.title %></h4>
            <% end %>
            <div class="card-item card-button mt-4">
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="far fa-edit"></i> CHANGE
              <% end %>
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="fas fa-times"></i> CANCEL
              <% end %>
            </div>
          </div>
        </div>
      <% end %>

    </div>

    <!-- Property bookings by current MONTH -->
    <div class="tab-pane fade" id="pills-month" role="tabpanel" aria-labelledby="pills-month-tab">

      <div class="d-flex">
        <div class="flex-grow-1">
          <h5 class="text-grey"> # <%= pluralize(current_user.current_month_pm_bookings.size, "Boooking") %> </h5>
          <span class="font-weight-bold"> <%= current_user.current_month_pm_bookings.size %> </span>
        </div>
      </div>

      <% @current_month_pm_bookings.each do |booking| %>
        <div class="card card-dashboard">
          <div class="card-body">
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-calendar fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%d/%m/%Y") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-clock fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%H:%M") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-map-marker-alt fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.property.address %></h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-euro-sign fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.cost.round %> </h3>
            </div>
            <h4 class="mt-3 mb-1">Service details:</h4>
            <% booking.booking_tasks.each do |t| %>
              <h4 class="mb-1"> <i class="fas fa-check fa-fw grey"></i> <%= t.task.title %></h4>
            <% end %>
            <div class="card-item card-button mt-4">
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="far fa-edit"></i> CHANGE
              <% end %>
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="fas fa-times"></i> CANCEL
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <!--Property bookings by current YEAR -->
    <div class="tab-pane fade" id="pills-year" role="tabpanel" aria-labelledby="pills-year-tab">

      <div class="d-flex">
        <div class="flex-grow-1">
          <h5 class="text-grey"># bookings</h5>
          <span class="font-weight-bold"> <%= current_user.current_year_pm_bookings.size %> </span>
        </div>
      </div>

      <% @current_year_pm_bookings.each do |booking| %>
        <div class="card card-dashboard">
          <div class="card-body">
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-calendar fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%d/%m/%Y") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="far fa-clock fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.date.strftime("%H:%M") %> </h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-map-marker-alt fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.property.address %></h3>
            </div>
            <div class="card-item">
              <div class="card-icon-container"><i class="fas fa-euro-sign fa-fw"></i></div>
              <h3 class="ml-3"><%= booking.cost.round %> </h3>
            </div>
            <h4 class="mt-3 mb-1">Service details:</h4>
            <% booking.booking_tasks.each do |t| %>
              <h4 class="mb-1"> <i class="fas fa-check fa-fw grey"></i> <%= t.task.title %></h4>
            <% end %>
            <div class="card-item card-button mt-4">
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="far fa-edit"></i> CHANGE
              <% end %>
              <%= link_to "#", class:"btn-transparent" do %>
                <i class="fas fa-times"></i> CANCEL
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>

</div>
